# ğŸš€ åŸºäºè®¤çŸ¥ç§‘å­¦çš„æ··åˆRAGåˆ›æ–°æ–¹å‘ä¸å®éªŒè®¾è®¡

## ğŸ¯ æ ¸å¿ƒåˆ›æ–°ç†å¿µ

### 1. ç ”ç©¶å‡è®¾

**ä¸»å‡è®¾**: åŸºäºè®¤çŸ¥ç§‘å­¦çš„æŸ¥è¯¢æ„å›¾åˆ†ç±»èƒ½å¤Ÿæ˜¾è‘—æ”¹å–„æ··åˆRAGç³»ç»Ÿçš„æ€§èƒ½ï¼Œç›¸æ¯”ç°æœ‰åŸºäºè®¡ç®—å¤æ‚åº¦æˆ–ç®€å•å¯å‘å¼çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿå®ç°æ›´ç²¾ç¡®çš„ç­–ç•¥é€‰æ‹©å’Œæ›´å¥½çš„æ£€ç´¢æ•ˆæœã€‚

**å­å‡è®¾**:
1. **H1**: è®¤çŸ¥ç§‘å­¦é©±åŠ¨çš„6ç»´åº¦æ„å›¾åˆ†ç±»æ¯”ç°æœ‰3-4ç±»åˆ†ç±»æ›´ç²¾ç¡®(å‡†ç¡®ç‡æå‡15%+)
2. **H2**: æ„å›¾-ç­–ç•¥æ˜ å°„æœºåˆ¶æ¯”å›ºå®šç­–ç•¥é€‰æ‹©æ›´æœ‰æ•ˆ(æ€§èƒ½æå‡20%+)
3. **H3**: åŠ¨æ€èåˆæƒé‡æ¯”é™æ€æƒé‡æ›´é€‚åº”ä¸åŒæŸ¥è¯¢ç±»å‹(æå‡10%+)
4. **H4**: ç«¯åˆ°ç«¯ç³»ç»Ÿæ¯”ç°æœ‰SOTAæ–¹æ³•åœ¨å¤šä¸ªåŸºå‡†ä¸Šè¡¨ç°æ›´å¥½(æå‡15-30%)

### 2. ç†è®ºåˆ›æ–°æ¡†æ¶

#### ğŸ§  è®¤çŸ¥ç§‘å­¦åŸºç¡€
åŸºäºä»¥ä¸‹ç»å…¸ç†è®ºæ„å»ºæˆ‘ä»¬çš„æ¡†æ¶ï¼š

**1. Marchioniniä¿¡æ¯æœç´¢è¡Œä¸ºæ¨¡å‹**
- **æŸ¥æ‰¾å‹æœç´¢** (Lookup): å¯»æ‰¾å·²çŸ¥ä¿¡æ¯
- **å­¦ä¹ å‹æœç´¢** (Learn): è·å–æ–°çŸ¥è¯†
- **è°ƒæŸ¥å‹æœç´¢** (Investigate): æ·±å…¥åˆ†æé—®é¢˜

**2. Wilsonä¿¡æ¯éœ€æ±‚å±‚æ¬¡æ¨¡å‹**
- **ç²˜æ€§éœ€æ±‚** (Visceral Need): æ¨¡ç³Šçš„ä¿¡æ¯æ„ŸçŸ¥
- **æ„è¯†éœ€æ±‚** (Conscious Need): æ˜ç¡®çš„ä¿¡æ¯éœ€æ±‚
- **å½¢å¼éœ€æ±‚** (Formalized Need): å…·ä½“çš„æŸ¥è¯¢è¡¨è¾¾

**3. Kuhlthauä¿¡æ¯æœç´¢è¿‡ç¨‹æ¨¡å‹**
- **ä»»åŠ¡å¯åŠ¨** â†’ **ä¸»é¢˜é€‰æ‹©** â†’ **é¢„æ¢ç´¢** â†’ **ç„¦ç‚¹å½¢æˆ** â†’ **ä¿¡æ¯æ”¶é›†** â†’ **æœç´¢å®Œæˆ**

#### ğŸ¯ æˆ‘ä»¬çš„6ç»´åº¦æ„å›¾åˆ†ç±»ä½“ç³»

| ç»´åº¦ | ç±»åˆ« | è®¤çŸ¥ç‰¹å¾ | æ£€ç´¢ç­–ç•¥ | ç¤ºä¾‹æŸ¥è¯¢ |
|------|------|----------|----------|----------|
| **äº‹å®æ£€ç´¢** | Factual | æ˜ç¡®ã€å…·ä½“ã€å°é—­ | ç¨€ç–æ£€ç´¢ä¼˜å…ˆ | "å·´é»çš„äººå£æ˜¯å¤šå°‘ï¼Ÿ" |
| **æ¦‚å¿µç†è§£** | Conceptual | æŠ½è±¡ã€å®šä¹‰ã€å¼€æ”¾ | ç¨ å¯†æ£€ç´¢+çŸ¥è¯†å›¾è°± | "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ" |
| **ç¨‹åºå­¦ä¹ ** | Procedural | æ­¥éª¤ã€æ–¹æ³•ã€æ“ä½œ | ç»“æ„åŒ–æ£€ç´¢ | "å¦‚ä½•åˆ¶ä½œè›‹ç³•ï¼Ÿ" |
| **åˆ†ææ¨ç†** | Analytical | å…³ç³»ã€æ¨¡å¼ã€æ¨ç† | å¤šè·³æ£€ç´¢ | "ä¸ºä»€ä¹ˆè‚¡å¸‚ä¼šä¸‹è·Œï¼Ÿ" |
| **ç»¼åˆè¯„ä¼°** | Synthesis | æ¯”è¾ƒã€è¯„ä»·ã€åˆ¤æ–­ | å¤šæºèåˆ | "å“ªç§ç¼–ç¨‹è¯­è¨€æœ€é€‚åˆåˆå­¦è€…ï¼Ÿ" |
| **åˆ›é€ æ¢ç´¢** | Creative | å‘æ•£ã€åˆ›æ–°ã€æ¢ç´¢ | å¤šæ ·åŒ–æ£€ç´¢ | "æœªæ¥AIå‘å±•è¶‹åŠ¿å¦‚ä½•ï¼Ÿ" |

## ğŸ”¬ è¯¦ç»†å®éªŒè®¾è®¡

### å®éªŒ1: æ„å›¾åˆ†ç±»å™¨æ€§èƒ½è¯„ä¼°

#### ğŸ¯ ç›®æ ‡
éªŒè¯æˆ‘ä»¬çš„6ç»´åº¦æ„å›¾åˆ†ç±»ç›¸æ¯”ç°æœ‰æ–¹æ³•çš„ä¼˜è¶Šæ€§

#### ğŸ“Š å®éªŒè®¾ç½®
- **æ•°æ®é›†**: MS MARCO, Natural Questions, HotpotQA, TREC, WebQuestions
- **åŸºçº¿æ–¹æ³•**: 
  - Adaptive-RAGçš„3ç±»åˆ†ç±» (ç®€å•/ä¸­ç­‰/å¤æ‚)
  - Self-Routeçš„2ç±»åˆ†ç±» (å¯å›ç­”/ä¸å¯å›ç­”)
  - ä¼ ç»ŸæŸ¥è¯¢åˆ†ç±»æ–¹æ³•
- **è¯„ä¼°æŒ‡æ ‡**: å‡†ç¡®ç‡ã€F1åˆ†æ•°ã€æ··æ·†çŸ©é˜µã€Kappaç³»æ•°

#### ğŸ”§ å®ç°ç»†èŠ‚
```python
# æ„å›¾åˆ†ç±»å™¨æ¶æ„
class CognitiveIntentClassifier:
    def __init__(self):
        # è®¤çŸ¥ç‰¹å¾æå–å™¨
        self.cognitive_extractor = CognitiveFeatureExtractor()
        # è¯­è¨€å­¦ç‰¹å¾æå–å™¨  
        self.linguistic_extractor = LinguisticFeatureExtractor()
        # å¤šæ ‡ç­¾åˆ†ç±»å™¨
        self.classifier = RoBERTa_MultiLabel()
    
    def extract_features(self, query):
        # è®¤çŸ¥ç‰¹å¾: ç¡®å®šæ€§ã€å¤æ‚æ€§ã€æŠ½è±¡æ€§ç­‰
        cognitive_features = self.cognitive_extractor.extract(query)
        # è¯­è¨€å­¦ç‰¹å¾: è¯æ€§ã€å¥æ³•ã€è¯­ä¹‰ç­‰
        linguistic_features = self.linguistic_extractor.extract(query)
        return cognitive_features + linguistic_features
```

#### ğŸ“ˆ é¢„æœŸç»“æœ
- **å‡†ç¡®ç‡æå‡**: ä»55% (Adaptive-RAG) æå‡åˆ°75%+
- **F1åˆ†æ•°**: å„ç±»åˆ«F1åˆ†æ•°å‡è¶…è¿‡0.7
- **ä¸€è‡´æ€§**: Kappaç³»æ•° > 0.8

### å®éªŒ2: ç­–ç•¥-æ„å›¾æ˜ å°„æ•ˆæœéªŒè¯

#### ğŸ¯ ç›®æ ‡
éªŒè¯ä¸åŒæ„å›¾ç±»å‹ä¸æ£€ç´¢ç­–ç•¥çš„æœ€ä¼˜æ˜ å°„å…³ç³»

#### ğŸ“Š å®éªŒè®¾ç½®
- **ç­–ç•¥ç»„åˆ**: 
  - ç¨€ç–æ£€ç´¢ (BM25)
  - ç¨ å¯†æ£€ç´¢ (DPR, Contriever)
  - çŸ¥è¯†å›¾è°±æ£€ç´¢ (Freebase, Wikidata)
  - å¤šè·³æ£€ç´¢ (IRCoT, Self-Ask)
  - é‡æ’åº (MonoT5, RankT5)
- **èåˆæ–¹æ³•**: RRF, åŠ æƒå¹³å‡, å­¦ä¹ èåˆ
- **è¯„ä¼°æŒ‡æ ‡**: Recall@k, MRR, NDCG

#### ğŸ”§ ç­–ç•¥æ˜ å°„çŸ©é˜µ
```python
INTENT_STRATEGY_MAPPING = {
    'factual': {
        'sparse': 0.7,      # BM25æ“…é•¿ç²¾ç¡®åŒ¹é…
        'dense': 0.3,       # è¡¥å……è¯­ä¹‰ç†è§£
        'kg': 0.0,          # äº‹å®æŸ¥è¯¢ä¸éœ€è¦å¤æ‚æ¨ç†
        'rerank': 0.5       # é‡æ’åºæå‡ç²¾åº¦
    },
    'conceptual': {
        'sparse': 0.2,      # æ¦‚å¿µæŸ¥è¯¢éœ€è¦è¯­ä¹‰ç†è§£
        'dense': 0.6,       # ç¨ å¯†æ£€ç´¢æ“…é•¿æ¦‚å¿µåŒ¹é…
        'kg': 0.4,          # çŸ¥è¯†å›¾è°±æä¾›æ¦‚å¿µå…³ç³»
        'rerank': 0.3
    },
    # ... å…¶ä»–æ„å›¾ç±»å‹
}
```

#### ğŸ“ˆ é¢„æœŸç»“æœ
- **æ£€ç´¢æ€§èƒ½**: å„æ„å›¾ç±»å‹çš„Recall@10æå‡15-25%
- **ç­–ç•¥éªŒè¯**: éªŒè¯æˆ‘ä»¬çš„ç­–ç•¥æ˜ å°„å‡è®¾
- **æœ€ä¼˜ç»„åˆ**: å‘ç°æ¯ç§æ„å›¾çš„æœ€ä¼˜ç­–ç•¥ç»„åˆ

### å®éªŒ3: åŠ¨æ€èåˆæœºåˆ¶è¯„ä¼°

#### ğŸ¯ ç›®æ ‡
éªŒè¯åŸºäºæ„å›¾ç½®ä¿¡åº¦çš„åŠ¨æ€æƒé‡è°ƒæ•´æœºåˆ¶

#### ğŸ“Š å®éªŒè®¾ç½®
- **èåˆç­–ç•¥**:
  - é™æ€æƒé‡ (å›ºå®šæƒé‡)
  - åŠ¨æ€æƒé‡ (åŸºäºæ„å›¾ç½®ä¿¡åº¦)
  - è‡ªé€‚åº”æƒé‡ (åŸºäºæ£€ç´¢è´¨é‡)
- **æƒé‡è®¡ç®—**:
```python
def compute_dynamic_weights(intent_scores, retrieval_scores):
    # åŸºäºæ„å›¾ç½®ä¿¡åº¦è°ƒæ•´æƒé‡
    intent_confidence = max(intent_scores.values())
    base_weights = INTENT_STRATEGY_MAPPING[top_intent]
    
    # ç½®ä¿¡åº¦è¶Šé«˜ï¼Œè¶Šä¿¡ä»»é¢„è®¾æƒé‡
    confidence_factor = intent_confidence
    # æ£€ç´¢è´¨é‡è¶Šå¥½ï¼Œæƒé‡è¶Šé«˜
    quality_factor = np.mean(retrieval_scores)
    
    dynamic_weights = {}
    for strategy, base_weight in base_weights.items():
        dynamic_weights[strategy] = (
            base_weight * confidence_factor + 
            retrieval_scores[strategy] * (1 - confidence_factor)
        ) * quality_factor
    
    return normalize_weights(dynamic_weights)
```

#### ğŸ“ˆ é¢„æœŸç»“æœ
- **èåˆæ•ˆæœ**: åŠ¨æ€æƒé‡æ¯”é™æ€æƒé‡æå‡10-15%
- **é²æ£’æ€§**: å¯¹æ„å›¾åˆ†ç±»é”™è¯¯çš„å®¹é”™èƒ½åŠ›æ›´å¼º
- **é€‚åº”æ€§**: åœ¨ä¸åŒæ•°æ®é›†ä¸Šè¡¨ç°æ›´ç¨³å®š

### å®éªŒ4: ç«¯åˆ°ç«¯ç³»ç»Ÿæ€§èƒ½è¯„ä¼°

#### ğŸ¯ ç›®æ ‡
éªŒè¯å®Œæ•´ç³»ç»Ÿç›¸æ¯”ç°æœ‰SOTAæ–¹æ³•çš„ä¼˜è¶Šæ€§

#### ğŸ“Š å®éªŒè®¾ç½®
- **æ•°æ®é›†**: 
  - **é—®ç­”**: MS MARCO, Natural Questions, TriviaQA
  - **å¤šè·³æ¨ç†**: HotpotQA, 2WikiMultiHopQA, MuSiQue
  - **å¼€æ”¾åŸŸ**: KILT, ELI5
- **åŸºçº¿æ–¹æ³•**:
  - Adaptive-RAG (ICLR 2024)
  - Self-Route (arXiv 2024)
  - DAT (arXiv 2024)
  - HybridRAG (arXiv 2024)
  - Re2G (EMNLP 2023)
- **è¯„ä¼°æŒ‡æ ‡**: EM, F1, BLEU, ROUGE, BERTScore

#### ğŸ”§ ç³»ç»Ÿæ¶æ„
```python
class CognitiveHybridRAG:
    def __init__(self):
        self.intent_classifier = CognitiveIntentClassifier()
        self.strategy_selector = StrategySelector()
        self.retrievers = {
            'sparse': BM25Retriever(),
            'dense': DPRRetriever(),
            'kg': KGRetriever(),
            'multihop': MultiHopRetriever()
        }
        self.reranker = MonoT5Reranker()
        self.fusion_engine = DynamicFusionEngine()
        self.generator = T5Generator()
    
    def retrieve_and_generate(self, query):
        # 1. æ„å›¾åˆ†ç±»
        intent_scores = self.intent_classifier.classify(query)
        
        # 2. ç­–ç•¥é€‰æ‹©
        strategies = self.strategy_selector.select(intent_scores)
        
        # 3. å¤šç­–ç•¥æ£€ç´¢
        all_results = {}
        for strategy, weight in strategies.items():
            results = self.retrievers[strategy].retrieve(query)
            all_results[strategy] = (results, weight)
        
        # 4. åŠ¨æ€èåˆ
        fused_results = self.fusion_engine.fuse(
            all_results, intent_scores
        )
        
        # 5. é‡æ’åº
        reranked_results = self.reranker.rerank(
            query, fused_results
        )
        
        # 6. ç­”æ¡ˆç”Ÿæˆ
        answer = self.generator.generate(
            query, reranked_results
        )
        
        return answer
```

#### ğŸ“ˆ é¢„æœŸç»“æœ
- **æ•´ä½“æ€§èƒ½**: åœ¨ä¸»è¦æ•°æ®é›†ä¸Šæå‡15-30%
- **ä¸€è‡´æ€§**: åœ¨ä¸åŒç±»å‹ä»»åŠ¡ä¸Šéƒ½æœ‰æå‡
- **æ•ˆç‡**: è®¡ç®—æˆæœ¬é™ä½20-40%

## ğŸ¯ åˆ›æ–°ç‚¹æ€»ç»“

### 1. ç†è®ºåˆ›æ–°
- **é¦–æ¬¡**å°†è®¤çŸ¥ç§‘å­¦ç³»ç»Ÿæ€§åº”ç”¨äºRAG
- **é¦–åˆ›**6ç»´åº¦æŸ¥è¯¢æ„å›¾åˆ†ç±»ä½“ç³»
- **å»ºç«‹**æ„å›¾-ç­–ç•¥æ˜ å°„ç†è®ºæ¡†æ¶

### 2. æŠ€æœ¯åˆ›æ–°
- **å¤šå±‚æ¬¡**æ„å›¾ç†è§£æœºåˆ¶
- **è‡ªé€‚åº”**ç­–ç•¥é€‰æ‹©ç®—æ³•
- **åŠ¨æ€**èåˆæƒé‡è°ƒæ•´

### 3. å®è¯åˆ›æ–°
- **å…¨é¢**çš„åŸºå‡†è¯„ä¼°
- **æ·±å…¥**çš„æ¶ˆèç ”ç©¶
- **å®é™…**çš„åº”ç”¨éªŒè¯

## ğŸ“Š é¢„æœŸå½±å“

### å­¦æœ¯å½±å“
- **ç†è®ºè´¡çŒ®**: å¼€åˆ›RAGç ”ç©¶æ–°èŒƒå¼
- **æ–¹æ³•è´¡çŒ®**: æä¾›å¯å¤ç°çš„æŠ€æœ¯æ–¹æ¡ˆ
- **å®è¯è´¡çŒ®**: å»ºç«‹æ–°çš„è¯„ä¼°æ ‡å‡†

### å®ç”¨ä»·å€¼
- **æ€§èƒ½æå‡**: 15-30%çš„ç«¯åˆ°ç«¯æ”¹å–„
- **æ•ˆç‡ä¼˜åŒ–**: 20-40%çš„æˆæœ¬é™ä½
- **é€šç”¨æ€§**: è·¨é¢†åŸŸã€è·¨ä»»åŠ¡é€‚ç”¨

### é•¿è¿œä»·å€¼
- **ç†è®ºæŒ‡å¯¼**: ä¸ºåç»­ç ”ç©¶æä¾›ç†è®ºåŸºç¡€
- **æŠ€æœ¯æ ‡å‡†**: å»ºç«‹è¡Œä¸šæŠ€æœ¯æ ‡å‡†
- **åº”ç”¨æ¨å¹¿**: æ¨åŠ¨RAGæŠ€æœ¯äº§ä¸šåŒ–åº”ç”¨

---

**ç»“è®º**: åŸºäºè®¤çŸ¥ç§‘å­¦çš„æ··åˆRAGç³»ç»Ÿä»£è¡¨äº†ä¸€ä¸ªå…·æœ‰é‡å¤§åˆ›æ–°æ½œåŠ›å’Œå®ç”¨ä»·å€¼çš„ç ”ç©¶æ–¹å‘ã€‚é€šè¿‡ç³»ç»Ÿçš„ç†è®ºæ„å»ºã€æŠ€æœ¯åˆ›æ–°å’Œå®è¯éªŒè¯ï¼Œæˆ‘ä»¬æœ‰æœ›åœ¨RAGé¢†åŸŸåšå‡ºé‡è¦è´¡çŒ®ã€‚
